<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Interactif Maghrébin</title>
    <script type="module" src="https://ajax.googleapis.com/ajax/libs/model-viewer/4.0.0/model-viewer.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #d4af37;
            --secondary-color: #8b4513;
            --accent-color: #c19a6b;
            --dark-color: #2c1810;
            --light-color: #f8f5f0;
            --text-color: #333;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-color);
            transition: var(--transition);
        }

        body.dark-mode {
            --light-color: #1a1a1a;
            --text-color: #f0f0f0;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--secondary-color), var(--dark-color));
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 2rem;
            color: var(--primary-color);
        }

        .logo h1 {
            font-size: 1.5rem;
        }

        .nav-controls {
            display: flex;
            gap: 15px;
        }

        .btn {
            background-color: var(--primary-color);
            color: var(--dark-color);
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .btn:hover {
            background-color: #e6c158;
            transform: translateY(-2px);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(44, 24, 16, 0.7), rgba(44, 24, 16, 0.7)), 
                        url('https://images.unsplash.com/photo-1517244683847-7456b63c5969?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80');
            background-size: cover;
            background-position: center;
            color: white;
            text-align: center;
            padding: 4rem 1rem;
            margin-bottom: 2rem;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 2rem;
        }

        .cta-btn {
            background-color: var(--primary-color);
            color: var(--dark-color);
            font-size: 1.2rem;
            padding: 12px 30px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: bold;
            display: inline-block;
            transition: var(--transition);
        }

        .cta-btn:hover {
            background-color: #e6c158;
            transform: scale(1.05);
        }

        /* Menu Section */
        .menu-section {
            padding: 2rem 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 2rem;
            color: var(--secondary-color);
            position: relative;
        }

        .section-title:after {
            content: '';
            display: block;
            width: 100px;
            height: 3px;
            background-color: var(--primary-color);
            margin: 10px auto;
        }

        /* Filters */
        .filters {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 2rem;
        }

        .filter-btn {
            background-color: white;
            border: 1px solid var(--accent-color);
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            transition: var(--transition);
        }

        body.dark-mode .filter-btn {
            background-color: #2a2a2a;
            color: white;
        }

        .filter-btn.active, .filter-btn:hover {
            background-color: var(--accent-color);
            color: white;
        }

        /* Menu Categories */
        .menu-categories {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .category {
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        body.dark-mode .category {
            background-color: #2a2a2a;
        }

        .category:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .category-header {
            background: linear-gradient(135deg, var(--secondary-color), var(--dark-color));
            color: white;
            padding: 1rem;
            text-align: center;
        }

        .category-items {
            padding: 1rem;
        }

        .menu-item {
            padding: 1rem 0;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: var(--transition);
        }

        body.dark-mode .menu-item {
            border-bottom: 1px solid #444;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:hover {
            background-color: rgba(193, 154, 107, 0.1);
        }

        .item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .item-name {
            font-weight: bold;
        }

        .item-price {
            color: var(--primary-color);
            font-weight: bold;
        }

        .item-description {
            font-size: 0.9rem;
            color: #666;
        }

        body.dark-mode .item-description {
            color: #aaa;
        }

        /* Dish Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
        }

        .modal-content {
            background-color: white;
            max-width: 800px;
            margin: 50px auto;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: modalFade 0.3s;
        }

        body.dark-mode .modal-content {
            background-color: #2a2a2a;
            color: white;
        }

        @keyframes modalFade {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .modal-header {
            position: relative;
        }

        .dish-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background-color: rgba(0, 0, 0, 0.5);
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.5rem;
            transition: var(--transition);
        }

        .close-modal:hover {
            background-color: rgba(0, 0, 0, 0.8);
        }

        .modal-body {
            padding: 2rem;
        }

        .dish-title {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .dish-name {
            font-size: 1.8rem;
            color: var(--secondary-color);
        }

        .dish-price {
            font-size: 1.5rem;
            color: var(--primary-color);
            font-weight: bold;
        }

        .dish-description {
            margin-bottom: 1.5rem;
            line-height: 1.7;
        }

        .dish-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .detail-item {
            text-align: center;
            padding: 10px;
            background-color: rgba(193, 154, 107, 0.1);
            border-radius: 5px;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 5px;
        }

        body.dark-mode .detail-label {
            color: #aaa;
        }

        .detail-value {
            font-weight: bold;
        }

        .order-btn {
            background-color: var(--primary-color);
            color: var(--dark-color);
            border: none;
            padding: 12px 30px;
            border-radius: 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            display: block;
            width: 100%;
            transition: var(--transition);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .order-btn:hover {
            background-color: #e6c158;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* 3D Model Viewer Styles */
        .model-container {
            position: relative;
            width: 100%;
            height: 400px;
            margin: 1rem 0;
            border-radius: 10px;
            overflow: hidden;
            background: #f5f5f5;
        }

        body.dark-mode .model-container {
            background: #333;
        }

        model-viewer {
            width: 100%;
            height: 100%;
            display: none;
        }

        model-viewer.active {
            display: block;
        }

        .model-nav-button {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 18px;
            z-index: 100;
            cursor: pointer;
            transition: var(--transition);
        }

        .model-nav-button:hover {
            background: rgba(0,0,0,0.8);
        }

        #model-prev-btn {
            left: 10px;
        }

        #model-next-btn {
            right: 10px;
        }

        .ar-button {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            z-index: 100;
            cursor: pointer;
            transition: var(--transition);
        }

        .ar-button:hover {
            background: rgba(0,0,0,0.9);
        }

        .view-3d-btn {
            background-color: var(--secondary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
            transition: var(--transition);
        }

        .view-3d-btn:hover {
            background-color: #a0522d;
        }

        /* Footer */
        footer {
            background-color: var(--dark-color);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }

        .footer-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1rem;
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-link {
            color: white;
            font-size: 1.5rem;
            transition: var(--transition);
        }

        .social-link:hover {
            color: var(--primary-color);
        }

        /* Language Selector */
        .language-selector {
            position: relative;
            display: inline-block;
        }

        .language-btn {
            background-color: transparent;
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .language-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background-color: white;
            min-width: 120px;
            box-shadow: var(--shadow);
            border-radius: 4px;
            overflow: hidden;
            z-index: 10;
        }

        body.dark-mode .language-dropdown {
            background-color: #2a2a2a;
        }

        .language-selector:hover .language-dropdown {
            display: block;
        }

        .language-option {
            padding: 10px 15px;
            cursor: pointer;
            transition: var(--transition);
        }

        .language-option:hover {
            background-color: rgba(193, 154, 107, 0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .hero h2 {
                font-size: 2rem;
            }

            .menu-categories {
                grid-template-columns: 1fr;
            }

            .dish-title {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .model-container {
                height: 300px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-utensils"></i>
                    <h1>Saveurs du Maghreb</h1>
                </div>
                <div class="nav-controls">
                    <button class="btn" id="darkModeToggle">
                        <i class="fas fa-moon"></i> Mode Sombre
                    </button>
                    <div class="language-selector">
                        <button class="language-btn">
                            <i class="fas fa-globe"></i> FR
                        </button>
                        <div class="language-dropdown">
                            <div class="language-option" data-lang="fr">Français</div>
                            <div class="language-option" data-lang="en">English</div>
                            <div class="language-option" data-lang="es">Español</div>
                            <div class="language-option" data-lang="ar">العربية</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>Découvrez les Saveurs Authentiques du Maghreb</h2>
            <p>Plongez dans une expérience culinaire unique avec notre menu interactif. Scannez le QR code pour explorer nos plats en détail.</p>
            <a href="#menu" class="cta-btn">Voir le Menu</a>
        </div>
    </section>

    <!-- Menu Section -->
    <section class="menu-section" id="menu">
        <div class="container">
            <h2 class="section-title">Notre Menu</h2>
            
            <!-- Filters -->
            <div class="filters">
                <button class="filter-btn active" data-filter="all">Tous</button>
                <button class="filter-btn" data-filter="vegetarien">Végétarien</button>
                <button class="filter-btn" data-filter="sans-gluten">Sans Gluten</button>
                <button class="filter-btn" data-filter="epice">Épicé</button>
            </div>

            <!-- Menu Categories -->
            <div class="menu-categories">
                <!-- Entrées -->
                <div class="category">
                    <div class="category-header">
                        <h3>Entrées</h3>
                    </div>
                    <div class="category-items">
                        <div class="menu-item" data-category="entrees" data-tags="vegetarien" data-id="1">
                            <div class="item-header">
                                <span class="item-name">Briouates au Fromage</span>
                                <span class="item-price">8€</span>
                            </div>
                            <p class="item-description">Feuilles de brick farcies au fromage et aux herbes, frites à la perfection</p>
                        </div>
                        <div class="menu-item" data-category="entrees" data-tags="vegetarien" data-id="2">
                            <div class="item-header">
                                <span class="item-name">Salade Méchouia</span>
                                <span class="item-price">7€</span>
                            </div>
                            <p class="item-description">Salade de poivrons grillés, tomates et oignons à l'huile d'olive</p>
                        </div>
                        <div class="menu-item" data-category="entrees" data-tags="epice" data-id="3">
                            <div class="item-header">
                                <span class="item-name">Harira</span>
                                <span class="item-price">6€</span>
                            </div>
                            <p class="item-description">Soupe traditionnelle aux lentilles, pois chiches et épices</p>
                        </div>
                    </div>
                </div>

                <!-- Plats Principaux -->
                <div class="category">
                    <div class="category-header">
                        <h3>Plats Principaux</h3>
                    </div>
                    <div class="category-items">
                        <div class="menu-item" data-category="plats" data-tags="epice" data-id="4">
                            <div class="item-header">
                                <span class="item-name">Couscous Royal</span>
                                <span class="item-price">18€</span>
                            </div>
                            <p class="item-description">Semoule accompagnée de légumes, merguez, poulet et agneau</p>
                            <button class="view-3d-btn">
                                <i class="fas fa-cube"></i> Voir en 3D
                            </button>
                        </div>
                        <div class="menu-item" data-category="plats" data-tags="epice" data-id="5">
                            <div class="item-header">
                                <span class="item-name">Tajine d'Agneau</span>
                                <span class="item-price">16€</span>
                            </div>
                            <p class="item-description">Agneau mijoté avec pruneaux, amandes et épices</p>
                        </div>
                        <div class="menu-item" data-category="plats" data-tags="sans-gluten" data-id="6">
                            <div class="item-header">
                                <span class="item-name">Méchoui d'Agneau</span>
                                <span class="item-price">22€</span>
                            </div>
                            <p class="item-description">Épaule d'agneau rôtie lentement avec un mélange d'épices</p>
                        </div>
                        <div class="menu-item" data-category="plats" data-tags="vegetarien" data-id="7">
                            <div class="item-header">
                                <span class="item-name">Tajine Végétarien</span>
                                <span class="item-price">14€</span>
                            </div>
                            <p class="item-description">Légumes de saison mijotés avec des épices et des herbes fraîches</p>
                        </div>
                    </div>
                </div>

                <!-- Desserts -->
                <div class="category">
                    <div class="category-header">
                        <h3>Desserts</h3>
                    </div>
                    <div class="category-items">
                        <div class="menu-item" data-category="desserts" data-tags="vegetarien" data-id="8">
                            <div class="item-header">
                                <span class="item-name">Baklava</span>
                                <span class="item-price">6€</span>
                            </div>
                            <p class="item-description">Pâtisserie feuilletée aux noix et au miel</p>
                        </div>
                        <div class="menu-item" data-category="desserts" data-tags="vegetarien,sans-gluten" data-id="9">
                            <div class="item-header">
                                <span class="item-name">Corne de Gazelle</span>
                                <span class="item-price">5€</span>
                            </div>
                            <p class="item-description">Pâtisserie en forme de corne fourrée aux amandes</p>
                        </div>
                        <div class="menu-item" data-category="desserts" data-tags="vegetarien" data-id="10">
                            <div class="item-header">
                                <span class="item-name">M'hanncha</span>
                                <span class="item-price">7€</span>
                            </div>
                            <p class="item-description">Gâteau en forme de serpent aux amandes et à l'eau de fleur d'oranger</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Dish Modal -->
    <div class="modal" id="dishModal">
        <div class="modal-content">
            <div class="modal-header">
                <img src="" alt="Plat" class="dish-image" id="modalImage">
                <div class="close-modal" id="closeModal">
                    <i class="fas fa-times"></i>
                </div>
            </div>
            <div class="modal-body">
                <div class="dish-title">
                    <h2 class="dish-name" id="modalName">Nom du plat</h2>
                    <span class="dish-price" id="modalPrice">0€</span>
                </div>
                <p class="dish-description" id="modalDescription">Description du plat</p>
                
                <!-- 3D Model Viewer for Couscous Royal -->
                <div id="modelViewerSection" style="display: none;">
                    <h3 style="margin-bottom: 1rem; color: var(--secondary-color);">Vue 3D du Plat</h3>
                    <div class="model-container">
                        <model-viewer
                            id="model1"
                            class="active"
                            src="https://modelviewer.dev/shared-assets/models/Astronaut.glb"
                            ar
                            ar-modes="quick-look webxr scene-viewer"
                            camera-controls
                            environment-image="neutral"
                            xr-environment
                            alt="Couscous Royal 3D Model"
                            quick-look-browsers="safari"
                        >
                            <button slot="ar-button" id="ar-button1" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 10px 20px; border-radius: 20px; border: none; display: none;">
                                View in AR
                            </button>
                        </model-viewer>
                        
                        <model-viewer
                            id="model2"
                            src="https://modelviewer.dev/shared-assets/models/NeilArmstrong.glb"
                            ar
                            ar-modes="quick-look webxr scene-viewer"
                            camera-controls
                            environment-image="neutral"
                            xr-environment
                            alt="Couscous Royal - Vue détaillée"
                            quick-look-browsers="safari"
                        >
                            <button slot="ar-button" id="ar-button2" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.7); color: white; padding: 10px 20px; border-radius: 20px; border: none; display: none;">
                                View in AR
                            </button>
                        </model-viewer>
                    </div>
                    
                    <button id="model-prev-btn" class="model-nav-button">←</button>
                    <button id="model-next-btn" class="model-nav-button">→</button>
                    <button class="ar-button">Voir en Réalité Augmentée</button>
                </div>
                
                <div class="dish-details">
                    <div class="detail-item">
                        <div class="detail-label">Temps de préparation</div>
                        <div class="detail-value" id="modalPrepTime">20 min</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Niveau d'épices</div>
                        <div class="detail-value" id="modalSpiceLevel">Moyen</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Régime</div>
                        <div class="detail-value" id="modalDiet">Standard</div>
                    </div>
                </div>
                
                <button class="order-btn" id="orderBtn">
                    <i class="fas fa-shopping-cart"></i> Commander ce plat
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p>&copy; 2023 Saveurs du Maghreb - Tous droits réservés</p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-facebook"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-tripadvisor"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Données des plats
        const dishes = {
            4: {
                name: "Couscous Royal",
                price: "18€",
                description: "Notre plat signature : une semoule de blé fine et légère, cuite à la vapeur pour une texture parfaite, accompagnée d'un riche bouillon de légumes (carottes, navets, courgettes, potiron). Servi avec des merguez épicées, du poulet mariné au safran et de l'agneau tendre mijoté avec des pruneaux.",
                image: "https://images.unsplash.com/photo-1533089860892-a7c6f0a88666?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                prepTime: "60 min",
                spiceLevel: "Moyen",
                diet: "Contient Gluten",
                has3D: true
            },
            // ... autres plats (identique au code précédent)
        };

        // Éléments DOM
        const darkModeToggle = document.getElementById('darkModeToggle');
        const filterButtons = document.querySelectorAll('.filter-btn');
        const menuItems = document.querySelectorAll('.menu-item');
        const dishModal = document.getElementById('dishModal');
        const closeModal = document.getElementById('closeModal');
        const modalImage = document.getElementById('modalImage');
        const modalName = document.getElementById('modalName');
        const modalPrice = document.getElementById('modalPrice');
        const modalDescription = document.getElementById('modalDescription');
        const modalPrepTime = document.getElementById('modalPrepTime');
        const modalSpiceLevel = document.getElementById('modalSpiceLevel');
        const modalDiet = document.getElementById('modalDiet');
        const orderBtn = document.getElementById('orderBtn');
        const languageOptions = document.querySelectorAll('.language-option');
        const modelViewerSection = document.getElementById('modelViewerSection');

        // 3D Model Viewer Elements
        const models = document.querySelectorAll('model-viewer');
        const modelPrevBtn = document.getElementById('model-prev-btn');
        const modelNextBtn = document.getElementById('model-next-btn');
        const arButton = document.querySelector('.ar-button');

        // Mode sombre
        darkModeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            const icon = darkModeToggle.querySelector('i');
            if (document.body.classList.contains('dark-mode')) {
                icon.className = 'fas fa-sun';
                darkModeToggle.innerHTML = '<i class="fas fa-sun"></i> Mode Clair';
            } else {
                icon.className = 'fas fa-moon';
                darkModeToggle.innerHTML = '<i class="fas fa-moon"></i> Mode Sombre';
            }
        });

        // Filtres
        filterButtons.forEach(button => {
            button.addEventListener('click', () => {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                button.classList.add('active');
                
                const filter = button.getAttribute('data-filter');
                
                menuItems.forEach(item => {
                    if (filter === 'all') {
                        item.style.display = 'block';
                    } else {
                        const tags = item.getAttribute('data-tags');
                        if (tags && tags.includes(filter)) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    }
                });
            });
        });

        // Ouvrir le modal du plat
        menuItems.forEach(item => {
            item.addEventListener('click', () => {
                const dishId = item.getAttribute('data-id');
                const dish = dishes[dishId];
                
                if (dish) {
                    modalImage.src = dish.image;
                    modalName.textContent = dish.name;
                    modalPrice.textContent = dish.price;
                    modalDescription.textContent = dish.description;
                    modalPrepTime.textContent = dish.prepTime;
                    modalSpiceLevel.textContent = dish.spiceLevel;
                    modalDiet.textContent = dish.diet;
                    
                    // Afficher ou masquer la section 3D
                    if (dish.has3D) {
                        modelViewerSection.style.display = 'block';
                        initialize3DViewer();
                    } else {
                        modelViewerSection.style.display = 'none';
                    }
                    
                    dishModal.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                }
            });
        });

        // Initialiser le viewer 3D
        function initialize3DViewer() {
            let currentModelIndex = 0;
            
            function showModel(index) {
                models.forEach((model, i) => {
                    model.classList.toggle('active', i === index);
                });
                currentModelIndex = index;
            }
            
            modelPrevBtn.addEventListener('click', () => {
                const newIndex = (currentModelIndex - 1 + models.length) % models.length;
                showModel(newIndex);
            });
            
            modelNextBtn.addEventListener('click', () => {
                const newIndex = (currentModelIndex + 1) % models.length;
                showModel(newIndex);
            });
            
            // Activer la réalité augmentée
            arButton.addEventListener('click', () => {
                const currentModel = models[currentModelIndex];
                const arBtn = currentModel.querySelector('[slot="ar-button"]');
                
                if (arBtn) {
                    arBtn.click();
                }
            });
            
            // Auto-rotation des modèles
            models.forEach(model => {
                model.autoRotate = true;
                model.autoRotateDelay = 0;
            });
            
            // Réinitialiser l'affichage
            showModel(0);
        }

        // Fermer le modal
        closeModal.addEventListener('click', () => {
            dishModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        });

        // Fermer le modal en cliquant à l'extérieur
        window.addEventListener('click', (e) => {
            if (e.target === dishModal) {
                dishModal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        });

        // Commander un plat
        orderBtn.addEventListener('click', () => {
            alert('Votre commande a été envoyée à la cuisine ! Un serveur viendra bientôt confirmer votre commande.');
            dishModal.style.display = 'none';
            document.body.style.overflow = 'auto';
        });

        // Sélection de la langue
        languageOptions.forEach(option => {
            option.addEventListener('click', () => {
                const lang = option.getAttribute('data-lang');
                const languageBtn = document.querySelector('.language-btn');
                
                if (lang === 'fr') {
                    languageBtn.innerHTML = '<i class="fas fa-globe"></i> FR';
                } else if (lang === 'en') {
                    languageBtn.innerHTML = '<i class="fas fa-globe"></i> EN';
                } else if (lang === 'es') {
                    languageBtn.innerHTML = '<i class="fas fa-globe"></i> ES';
                } else if (lang === 'ar') {
                    languageBtn.innerHTML = '<i class="fas fa-globe"></i> العربية';
                }
            });
        });

        // Ajouter un événement pour le bouton "Voir en 3D" du Couscous Royal
        document.querySelector('.view-3d-btn').addEventListener('click', function(e) {
            e.stopPropagation(); // Empêcher l'ouverture du modal normal
            const dish = dishes[4]; // Couscous Royal
            
            modalImage.src = dish.image;
            modalName.textContent = dish.name;
            modalPrice.textContent = dish.price;
            modalDescription.textContent = dish.description;
            modalPrepTime.textContent = dish.prepTime;
            modalSpiceLevel.textContent = dish.spiceLevel;
            modalDiet.textContent = dish.diet;
            
            // Afficher la section 3D
            modelViewerSection.style.display = 'block';
            initialize3DViewer();
            
            dishModal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        });
    </script>
</body>
</html>
